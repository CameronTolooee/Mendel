<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Sun Dec 07 20:38:31 MST 2014 -->
<title>MessageRouter (Mendel 0.1 Documentation)</title>
<meta name="date" content="2014-12-07">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MessageRouter (Mendel 0.1 Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../mendel/network/MessageListener.html" title="interface in mendel.network"><span class="strong">Prev Class</span></a></li>
<li><a href="../../mendel/network/NetworkDestination.html" title="class in mendel.network"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?mendel/network/MessageRouter.html" target="_top">Frames</a></li>
<li><a href="MessageRouter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">mendel.network</div>
<h2 title="Class MessageRouter" class="title">Class MessageRouter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>mendel.network.MessageRouter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../mendel/network/ClientMessageRouter.html" title="class in mendel.network">ClientMessageRouter</a>, <a href="../../mendel/network/ServerMessageRouter.html" title="class in mendel.network">ServerMessageRouter</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">MessageRouter</span>
extends java.lang.Object
implements java.lang.Runnable</pre>
<div class="block">Provides an abstract implementation for consuming and publishing messages on
 both the server and client side.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>malensek</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.concurrent.ConcurrentHashMap&lt;java.nio.channels.SelectionKey,java.lang.Integer&gt;</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#changeInterest">changeInterest</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#DEFAULT_READ_BUFFER_SIZE">DEFAULT_READ_BUFFER_SIZE</a></strong></code>
<div class="block">The default read buffer size is 8 MB.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#DEFAULT_WRITE_QUEUE_SIZE">DEFAULT_WRITE_QUEUE_SIZE</a></strong></code>
<div class="block">The default write queue allows 100 items to be inserted before it
 starts blocking.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static java.util.logging.Logger</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#logger">logger</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#online">online</a></strong></code>
<div class="block">Flag used to determine whether the Selector thread should run</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#PREFIX_SZ">PREFIX_SZ</a></strong></code>
<div class="block">The size (in bytes) of the message prefix used in the system.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#READ_BUFFER_PROPERTY">READ_BUFFER_PROPERTY</a></strong></code>
<div class="block">System property that overrides the read buffer size.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#readBufferSize">readBufferSize</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.nio.channels.Selector</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#selector">selector</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#WRITE_QUEUE_PROPERTY">WRITE_QUEUE_PROPERTY</a></strong></code>
<div class="block">System property that overrides the write queue maximum size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#writeQueueSize">writeQueueSize</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../mendel/network/MessageRouter.html#MessageRouter()">MessageRouter</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../mendel/network/MessageRouter.html#MessageRouter(int,%20int)">MessageRouter</a></strong>(int&nbsp;readBufferSize,
             int&nbsp;maxWriteQueueSize)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#accept(java.nio.channels.SelectionKey)">accept</a></strong>(java.nio.channels.SelectionKey&nbsp;key)</code>
<div class="block">Accepts new connections.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#addListener(mendel.network.MessageListener)">addListener</a></strong>(<a href="../../mendel/network/MessageListener.html" title="interface in mendel.network">MessageListener</a>&nbsp;listener)</code>
<div class="block">Adds a message listener (consumer) to this MessageRouter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#connect(java.nio.channels.SelectionKey)">connect</a></strong>(java.nio.channels.SelectionKey&nbsp;key)</code>
<div class="block">Finishes setting up a connection on a SocketChannel.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#disconnect(java.nio.channels.SelectionKey)">disconnect</a></strong>(java.nio.channels.SelectionKey&nbsp;key)</code>
<div class="block">Handle termination of connections.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#dispatchConnect(mendel.network.NetworkDestination)">dispatchConnect</a></strong>(<a href="../../mendel/network/NetworkDestination.html" title="class in mendel.network">NetworkDestination</a>&nbsp;endpoint)</code>
<div class="block">Informs all listening consumers that a connection to a remote endpoint
 has been made.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#dispatchDisconnect(mendel.network.NetworkDestination)">dispatchDisconnect</a></strong>(<a href="../../mendel/network/NetworkDestination.html" title="class in mendel.network">NetworkDestination</a>&nbsp;endpoint)</code>
<div class="block">Informs all listening consumers that a connection to a remote endpoint
 has been terminated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#dispatchMessage(mendel.network.MendelMessage)">dispatchMessage</a></strong>(<a href="../../mendel/network/MendelMessage.html" title="class in mendel.network">MendelMessage</a>&nbsp;message)</code>
<div class="block">Dispatches a message to all listening consumers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#getClientString(java.nio.channels.SocketChannel)">getClientString</a></strong>(java.nio.channels.SocketChannel&nbsp;channel)</code>
<div class="block">Determines a connection's hostname and port, then concatenates the two
 values, separated by a colon (:).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="../../mendel/network/NetworkDestination.html" title="class in mendel.network">NetworkDestination</a></code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#getDestination(java.nio.channels.SocketChannel)">getDestination</a></strong>(java.nio.channels.SocketChannel&nbsp;channel)</code>
<div class="block">Determines a connection's endpoint information (hostname and port) and
 encapsulates them in a <a href="../../mendel/network/NetworkDestination.html" title="class in mendel.network"><code>NetworkDestination</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#isOnline()">isOnline</a></strong>()</code>
<div class="block">Determines whether or not this MessageRouter is online.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#processIncomingMessage(java.nio.channels.SelectionKey)">processIncomingMessage</a></strong>(java.nio.channels.SelectionKey&nbsp;key)</code>
<div class="block">Process data received from a client SocketChannel.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#processSelectionKeys()">processSelectionKeys</a></strong>()</code>
<div class="block">Performs a select operation, and then processes the resulting
 SelectionKey set based on interest ops.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#read(java.nio.channels.SelectionKey)">read</a></strong>(java.nio.channels.SelectionKey&nbsp;key)</code>
<div class="block">Read data from a SocketChannel.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#readPrefix(java.nio.ByteBuffer,%20mendel.network.TransmissionTracker)">readPrefix</a></strong>(java.nio.ByteBuffer&nbsp;buffer,
          mendel.network.TransmissionTracker&nbsp;transmission)</code>
<div class="block">Read the payload size prefix from a channel.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#run()">run</a></strong>()</code>
<div class="block">As long as the MessageRouter is online, monitor connection operations
 through the Selector instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../mendel/network/Transmission.html" title="class in mendel.network">Transmission</a></code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#sendMessage(java.nio.channels.SelectionKey,%20mendel.network.MendelMessage)">sendMessage</a></strong>(java.nio.channels.SelectionKey&nbsp;key,
           <a href="../../mendel/network/MendelMessage.html" title="class in mendel.network">MendelMessage</a>&nbsp;message)</code>
<div class="block">Adds a message to the pending write queue for a particular SelectionKey
 and submits a change request for its interest set.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#updateInterestOps()">updateInterestOps</a></strong>()</code>
<div class="block">Updates interest sets for any SelectionKey instances that require
 changes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static java.nio.ByteBuffer</code></td>
<td class="colLast"><code><strong><a href="../../mendel/network/MessageRouter.html#wrapWithPrefix(mendel.network.MendelMessage)">wrapWithPrefix</a></strong>(<a href="../../mendel/network/MendelMessage.html" title="class in mendel.network">MendelMessage</a>&nbsp;message)</code>
<div class="block">Wraps a given message in a <code>ByteBuffer</code>, including the payload size
 prefix.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="logger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logger</h4>
<pre>protected static final&nbsp;java.util.logging.Logger logger</pre>
</li>
</ul>
<a name="PREFIX_SZ">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PREFIX_SZ</h4>
<pre>public static final&nbsp;int PREFIX_SZ</pre>
<div class="block">The size (in bytes) of the message prefix used in the system.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#mendel.network.MessageRouter.PREFIX_SZ">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_READ_BUFFER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_READ_BUFFER_SIZE</h4>
<pre>public static final&nbsp;int DEFAULT_READ_BUFFER_SIZE</pre>
<div class="block">The default read buffer size is 8 MB.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#mendel.network.MessageRouter.DEFAULT_READ_BUFFER_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_WRITE_QUEUE_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_WRITE_QUEUE_SIZE</h4>
<pre>public static final&nbsp;int DEFAULT_WRITE_QUEUE_SIZE</pre>
<div class="block">The default write queue allows 100 items to be inserted before it
 starts blocking.  This prevents situations where the MessageRouter is
 overwhelmed by an extreme number of write requests, exhausting available
 resources.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#mendel.network.MessageRouter.DEFAULT_WRITE_QUEUE_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="READ_BUFFER_PROPERTY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>READ_BUFFER_PROPERTY</h4>
<pre>public static final&nbsp;java.lang.String READ_BUFFER_PROPERTY</pre>
<div class="block">System property that overrides the read buffer size.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#mendel.network.MessageRouter.READ_BUFFER_PROPERTY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="WRITE_QUEUE_PROPERTY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WRITE_QUEUE_PROPERTY</h4>
<pre>public static final&nbsp;java.lang.String WRITE_QUEUE_PROPERTY</pre>
<div class="block">System property that overrides the write queue maximum size.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#mendel.network.MessageRouter.WRITE_QUEUE_PROPERTY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="online">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>online</h4>
<pre>protected&nbsp;boolean online</pre>
<div class="block">Flag used to determine whether the Selector thread should run</div>
</li>
</ul>
<a name="selector">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>selector</h4>
<pre>protected&nbsp;java.nio.channels.Selector selector</pre>
</li>
</ul>
<a name="readBufferSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readBufferSize</h4>
<pre>protected&nbsp;int readBufferSize</pre>
</li>
</ul>
<a name="writeQueueSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeQueueSize</h4>
<pre>protected&nbsp;int writeQueueSize</pre>
</li>
</ul>
<a name="changeInterest">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>changeInterest</h4>
<pre>protected&nbsp;java.util.concurrent.ConcurrentHashMap&lt;java.nio.channels.SelectionKey,java.lang.Integer&gt; changeInterest</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MessageRouter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MessageRouter</h4>
<pre>public&nbsp;MessageRouter()</pre>
</li>
</ul>
<a name="MessageRouter(int, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MessageRouter</h4>
<pre>public&nbsp;MessageRouter(int&nbsp;readBufferSize,
             int&nbsp;maxWriteQueueSize)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">As long as the MessageRouter is online, monitor connection operations
 through the Selector instance.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="updateInterestOps()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateInterestOps</h4>
<pre>protected&nbsp;void&nbsp;updateInterestOps()</pre>
<div class="block">Updates interest sets for any SelectionKey instances that require
 changes.  This allows external threads to queue up changes to the
 interest sets that will be fulfilled by the selector thread.</div>
</li>
</ul>
<a name="processSelectionKeys()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processSelectionKeys</h4>
<pre>protected&nbsp;void&nbsp;processSelectionKeys()
                             throws java.io.IOException</pre>
<div class="block">Performs a select operation, and then processes the resulting
 SelectionKey set based on interest ops.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="accept(java.nio.channels.SelectionKey)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accept</h4>
<pre>protected&nbsp;void&nbsp;accept(java.nio.channels.SelectionKey&nbsp;key)
               throws java.io.IOException</pre>
<div class="block">Accepts new connections.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The SelectionKey for the connecting client.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="connect(java.nio.channels.SelectionKey)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connect</h4>
<pre>protected&nbsp;void&nbsp;connect(java.nio.channels.SelectionKey&nbsp;key)</pre>
<div class="block">Finishes setting up a connection on a SocketChannel.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - SelectionKey for the SocketChannel.</dd></dl>
</li>
</ul>
<a name="read(java.nio.channels.SelectionKey)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>protected&nbsp;void&nbsp;read(java.nio.channels.SelectionKey&nbsp;key)</pre>
<div class="block">Read data from a SocketChannel.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - SelectionKey for the SocketChannel.</dd></dl>
</li>
</ul>
<a name="processIncomingMessage(java.nio.channels.SelectionKey)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processIncomingMessage</h4>
<pre>protected&nbsp;void&nbsp;processIncomingMessage(java.nio.channels.SelectionKey&nbsp;key)</pre>
<div class="block">Process data received from a client SocketChannel.  This method is
 chiefly concerned with processing incoming data streams into
 MendelMessage packets to be consumed by the system.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - SelectionKey for the client.</dd></dl>
</li>
</ul>
<a name="readPrefix(java.nio.ByteBuffer, mendel.network.TransmissionTracker)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPrefix</h4>
<pre>protected static&nbsp;boolean&nbsp;readPrefix(java.nio.ByteBuffer&nbsp;buffer,
                 mendel.network.TransmissionTracker&nbsp;transmission)</pre>
<div class="block">Read the payload size prefix from a channel.
 Each message in Mendel is prefixed with a payload size field; this is
 read to allocate buffers for the incoming message.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the payload size has been determined; false otherwise.</dd></dl>
</li>
</ul>
<a name="wrapWithPrefix(mendel.network.MendelMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wrapWithPrefix</h4>
<pre>protected static&nbsp;java.nio.ByteBuffer&nbsp;wrapWithPrefix(<a href="../../mendel/network/MendelMessage.html" title="class in mendel.network">MendelMessage</a>&nbsp;message)</pre>
<div class="block">Wraps a given message in a <code>ByteBuffer</code>, including the payload size
 prefix.  Data produced by this method will be subsequently read by the
 readPrefix() method.</div>
</li>
</ul>
<a name="sendMessage(java.nio.channels.SelectionKey, mendel.network.MendelMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMessage</h4>
<pre>public&nbsp;<a href="../../mendel/network/Transmission.html" title="class in mendel.network">Transmission</a>&nbsp;sendMessage(java.nio.channels.SelectionKey&nbsp;key,
                       <a href="../../mendel/network/MendelMessage.html" title="class in mendel.network">MendelMessage</a>&nbsp;message)
                         throws java.io.IOException</pre>
<div class="block">Adds a message to the pending write queue for a particular SelectionKey
 and submits a change request for its interest set. Pending data is placed
 in a blocking queue, so this function may block to prevent queueing an
 excessive amount of data.
 <p/>
 The system property <em>mendel.net.MessageRouter.writeQueueSize</em>
 tunes the maximum amount of data that can be queued.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - SelectionKey for the channel.</dd><dd><code>message</code> - MendelMessage to publish on the channel.</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../mendel/network/Transmission.html" title="class in mendel.network"><code>Transmission</code></a> instance representing the send operation.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="disconnect(java.nio.channels.SelectionKey)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disconnect</h4>
<pre>protected&nbsp;void&nbsp;disconnect(java.nio.channels.SelectionKey&nbsp;key)</pre>
<div class="block">Handle termination of connections.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The SelectionKey of the SocketChannel that has disconnected.</dd></dl>
</li>
</ul>
<a name="addListener(mendel.network.MessageListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre>public&nbsp;void&nbsp;addListener(<a href="../../mendel/network/MessageListener.html" title="interface in mendel.network">MessageListener</a>&nbsp;listener)</pre>
<div class="block">Adds a message listener (consumer) to this MessageRouter.  Listeners
 receive messages that are published by this MessageRouter.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - <a href="../../mendel/network/MessageListener.html" title="interface in mendel.network"><code>MessageListener</code></a> that will consume messages
                 published by this MessageRouter.</dd></dl>
</li>
</ul>
<a name="dispatchMessage(mendel.network.MendelMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatchMessage</h4>
<pre>protected&nbsp;void&nbsp;dispatchMessage(<a href="../../mendel/network/MendelMessage.html" title="class in mendel.network">MendelMessage</a>&nbsp;message)</pre>
<div class="block">Dispatches a message to all listening consumers.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - <a href="../../mendel/network/MendelMessage.html" title="class in mendel.network"><code>MendelMessage</code></a> to dispatch.</dd></dl>
</li>
</ul>
<a name="dispatchConnect(mendel.network.NetworkDestination)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatchConnect</h4>
<pre>protected&nbsp;void&nbsp;dispatchConnect(<a href="../../mendel/network/NetworkDestination.html" title="class in mendel.network">NetworkDestination</a>&nbsp;endpoint)</pre>
<div class="block">Informs all listening consumers that a connection to a remote endpoint
 has been made.</div>
</li>
</ul>
<a name="dispatchDisconnect(mendel.network.NetworkDestination)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatchDisconnect</h4>
<pre>protected&nbsp;void&nbsp;dispatchDisconnect(<a href="../../mendel/network/NetworkDestination.html" title="class in mendel.network">NetworkDestination</a>&nbsp;endpoint)</pre>
<div class="block">Informs all listening consumers that a connection to a remote endpoint
 has been terminated.</div>
</li>
</ul>
<a name="isOnline()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOnline</h4>
<pre>public&nbsp;boolean&nbsp;isOnline()</pre>
<div class="block">Determines whether or not this MessageRouter is online.  As long as the
 router is online, the selector thread will continue to run.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the MessageRouter instance is online and running.</dd></dl>
</li>
</ul>
<a name="getClientString(java.nio.channels.SocketChannel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClientString</h4>
<pre>protected static&nbsp;java.lang.String&nbsp;getClientString(java.nio.channels.SocketChannel&nbsp;channel)</pre>
<div class="block">Determines a connection's hostname and port, then concatenates the two
 values, separated by a colon (:).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>channel</code> - Channel to get client information about.</dd></dl>
</li>
</ul>
<a name="getDestination(java.nio.channels.SocketChannel)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getDestination</h4>
<pre>protected static&nbsp;<a href="../../mendel/network/NetworkDestination.html" title="class in mendel.network">NetworkDestination</a>&nbsp;getDestination(java.nio.channels.SocketChannel&nbsp;channel)</pre>
<div class="block">Determines a connection's endpoint information (hostname and port) and
 encapsulates them in a <a href="../../mendel/network/NetworkDestination.html" title="class in mendel.network"><code>NetworkDestination</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>channel</code> - The SocketChannel of the network endpoint.</dd>
<dt><span class="strong">Returns:</span></dt><dd>NetworkDestination representation of the endpoint.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../mendel/network/MessageListener.html" title="interface in mendel.network"><span class="strong">Prev Class</span></a></li>
<li><a href="../../mendel/network/NetworkDestination.html" title="class in mendel.network"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?mendel/network/MessageRouter.html" target="_top">Frames</a></li>
<li><a href="MessageRouter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
